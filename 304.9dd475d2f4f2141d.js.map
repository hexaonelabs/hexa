{"version":3,"file":"304.9dd475d2f4f2141d.js","mappings":"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","sources":["./libs/drive/src/index.ts","./libs/drive/src/lib/components/breadcrumbs/breadcrumbs.component.ts","./libs/drive/src/lib/components/breadcrumbs/breadcrumbs.component.html","./libs/drive/src/lib/components/dropable/dropable.component.ts","./libs/drive/src/lib/components/dropable/dropable.component.html","./libs/drive/src/lib/components/files-options-list/files-options-list.component.ts","./libs/drive/src/lib/components/files-options-list/files-options-list.component.html","./libs/drive/src/lib/components/header/header.component.ts","./libs/drive/src/lib/components/header/header.component.html","./libs/drive/src/lib/components/item-preview/item-preview.component.ts","./libs/drive/src/lib/components/item-preview/item-preview.component.html","./libs/drive/src/lib/components/items-container/items-container.component.ts","./libs/drive/src/lib/components/items-container/items-container.component.html","./libs/drive/src/lib/components/select-folder/select-folder.component.ts","./libs/drive/src/lib/components/select-folder/select-folder.component.html","./libs/drive/src/lib/components/setup-encryption/setup-encryption.component.ts","./libs/drive/src/lib/components/setup-encryption/setup-encryption.component.html","./libs/drive/src/lib/containers/drive-page/drive-page.component.ts","./libs/drive/src/lib/containers/drive-page/drive-page.component.html","./libs/drive/src/lib/directives/dropable.directive.ts","./libs/drive/src/lib/drive.module.ts","./libs/drive/src/lib/drive.utils.ts","./libs/drive/src/lib/lib.routes.ts","./libs/drive/src/lib/pipes/bytes-to-size.pipe.ts","./libs/drive/src/lib/pipes/is-shared.pipe.ts","./libs/drive/src/lib/pipes/preview-file.pipe.ts","./libs/drive/src/lib/pipes/safe.pipe.ts","./libs/drive/src/lib/pipes/slice-address.pipe.ts","./libs/drive/src/lib/pipes/total-storage.pipe.ts","./libs/drive/src/lib/services/mediafile.service.ts","./node_modules/@capacitor/core/dist/index.js","./node_modules/@capacitor/share/dist/esm/definitions.js","./node_modules/@capacitor/share/dist/esm/index.js"],"sourcesContent":["export * from './lib/drive.module';\n\nexport * from './lib/lib.routes';\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { HeaderComponent } from \"../header/header.component\";\n\n@Component({\n  selector: \"hexa-breadcrumbs\",\n  templateUrl: \"./breadcrumbs.component.html\",\n  styleUrls: [\"./breadcrumbs.component.scss\"],\n})\nexport class BreadcrumbsComponent {\n  @Input() public header!: HeaderComponent;\n  @Input() public breadcrumbs!: { name: string; _id: string; }[] | null;\n  @Input() public isSearching = false;\n  @Output() public readonly actions: EventEmitter<{\n    type: string;\n    payload: any;\n  }> = new EventEmitter();\n}\n","<ng-container *ngIf=\"breadcrumbs; else defaultBreadcrumb\">\n  <ion-col\n    size=\"auto\"\n    class=\"ion-align-items-center\"\n    [ngStyle]=\"{ display: 'flex' }\"\n    (click)=\"actions.emit({\n      type: 'navTo', \n      payload: { item: b }})\"\n    *ngFor=\"let b of breadcrumbs; let i = index; let isLast = last\"\n  >\n    <ion-label>\n      <span class=\"clickable\">{{\n        b.name === 'root' ? 'My Drive' : b.name\n      }}</span>\n      <ion-icon\n        slot=\"end\"\n        name=\"chevron-forward-outline\"\n        class=\"ion-padding-start\"\n        *ngIf=\"isSearching === true\"\n      ></ion-icon>\n      <ion-icon\n        slot=\"end\"\n        *ngIf=\"!isLast\"\n        name=\"chevron-forward-outline\"\n        class=\"ion-padding-start\"\n      ></ion-icon>\n    </ion-label>\n  </ion-col>\n  <ion-col\n    size=\"auto\"\n    class=\"ion-align-items-center\"\n    [ngStyle]=\"{ display: 'flex' }\"\n    *ngIf=\"isSearching === true\"\n  >\n    <ion-label>\n      <span>search results</span>\n    </ion-label>\n  </ion-col>\n</ng-container>\n<ng-template #defaultBreadcrumb>\n  <ion-col size=\"auto\" [ngStyle]=\"{ display: 'flex' }\">\n    <ion-label>\n      <span>My Drive</span>\n    </ion-label>\n  </ion-col>\n</ng-template>","import { Component, EventEmitter, Output } from '@angular/core';\n\n@Component({\n  selector: 'hexa-dropable',\n  templateUrl: './dropable.component.html',\n  styleUrls: ['./dropable.component.scss'],\n})\nexport class DropableComponent {\n  @Output() actions: EventEmitter<{\n    type: string;\n    payload?: any;\n  }> = new EventEmitter();\n}\n","<ion-row\n  hexaDropable\n  class=\"droppable-container ion-align-items-center ion-padding\"\n  (click)=\"actions.emit({type: 'addFile'})\"\n  (fileDropped)=\"actions.emit({type: 'onFileChange', payload: $event})\"\n>\n  <ion-col>\n    <ion-img src=\"./assets/drive/images/upload-file.svg\"></ion-img>\n    <ion-text color=\"primary\">\n      <span>Click or Drop Files Here to Upload</span>\n    </ion-text>\n  </ion-col>\n</ion-row>","import { Component, Input } from '@angular/core';\nimport { PopoverController } from '@ionic/angular';\n\n@Component({\n  selector: 'hexa-files-options-list',\n  templateUrl: './files-options-list.component.html',\n  styleUrls: ['./files-options-list.component.scss']\n})\nexport class FilesOptionsListComponent {\n\n  @Input() public readonly isFolder?: string;\n  \n  constructor(\n    public readonly popCtrl: PopoverController\n  ) {}\n\n}\n","<ion-list class=\"ion-no-padding\" mode=\"ios\" lines=\"none\">\n  <ion-list-header class=\"ion-margin-bottom\">\n    <ion-label>{{isFolder ? 'Folder' : 'File'}} options</ion-label>\n  </ion-list-header>\n  <ion-item [hidden]=\"!isFolder\" (click)=\"popCtrl.dismiss('navTo')\">\n    <ion-icon size=\"small\" name=\"folder-open-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Open\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item [hidden]=\"isFolder\" (click)=\"popCtrl.dismiss('preview')\">\n    <ion-icon size=\"small\" name=\"eye-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Preview\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item [hidden]=\"isFolder\" (click)=\"popCtrl.dismiss('download')\">\n    <ion-icon size=\"small\" name=\"download-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Download\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item (click)=\"popCtrl.dismiss('rename')\">\n    <ion-icon size=\"small\" name=\"pencil-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Rename\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item (click)=\"popCtrl.dismiss('move')\">\n    <ion-icon size=\"small\" name=\"arrow-redo-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Move to\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item [hidden]=\"isFolder\" (click)=\"popCtrl.dismiss('share')\">\n    <ion-icon size=\"small\" name=\"share-social-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Share\n      </h3>\n    </ion-label>\n  </ion-item>\n  <ion-item lines=\"none\" (click)=\"popCtrl.dismiss('delete')\">\n    <ion-icon size=\"small\" name=\"trash-outline\" slot=\"start\"></ion-icon>\n    <ion-label>\n      <h3>\n        Delete\n      </h3>\n    </ion-label>\n  </ion-item>\n</ion-list>","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'hexa-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n})\nexport class HeaderComponent {}","<ion-toolbar>\n  <ion-grid class=\"ion-no-padding ion-padding-horizontal\">\n    <ion-row class=\"ion-no-padding ion-align-items-center\">\n      <ion-col size=\"auto\">\n        <ion-menu-button></ion-menu-button>\n      </ion-col>\n      <ion-col>\n        <ng-content select=\"[slot=start]\"></ng-content>\n      </ion-col>\n      <ion-col class=\"ion-text-end ion-hide-md-down\">\n        <ng-content select=\"[slot=end]\"></ng-content>\n      </ion-col>\n      <ion-col size=\"auto\">\n        <div style=\"width: 82px;\"></div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-toolbar>","import { Component, Input } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { MediafileInterface } from '../../interfaces/mediafile.interface';\n\n@Component({\n  selector: 'hexa-item-preview',\n  templateUrl: './item-preview.component.html',\n  styleUrls: ['./item-preview.component.scss'],\n})\nexport class ItemPreviewComponent {\n  @Input() item!: MediafileInterface;\n  @Input() account!: string;\n\n  constructor(\n    public readonly modalCtrl: ModalController\n  ) {}\n}\n","<ion-content [fullscreen]=\"true\" class=\"ion-no-padding\">\n  <ion-button\n    fill=\"none\"\n    class=\"close-btn\"\n    (click)=\"modalCtrl.dismiss(null, 'cancel')\"\n  >\n    <ion-icon icon-only name=\"close\"></ion-icon>\n  </ion-button>\n  <ion-grid class=\"ion-no-padding\">\n    <ion-row class=\"ion-align-items-center ion-no-padding\">\n      <ion-col size=\"12\" size-md=\"7\" class=\"ion-text-center preview ion-no-padding\">\n        <ng-container [ngSwitch]=\"true\">\n          <!-- image -->\n          <div *ngSwitchCase=\"item?.type?.startsWith('image')\">\n            <ng-container *ngIf=\"item | previewFile | async as url; else skeletImg\">\n              <div class=\"bg-image\" [style.backgroundImage]=\"'url('+ url+')'\"></div>\n              <img\n                alt=\"image preview\"\n                [src]=\"url | safe: 'url'\"\n              />\n            </ng-container>\n            <ng-template #skeletImg>\n              <ion-spinner></ion-spinner>\n            </ng-template>\n          </div>\n          <div *ngSwitchCase=\"item?.type?.startsWith('audio')\">\n            <audio\n              controls\n              autoplay\n              *ngIf=\"item | previewFile | async as url; else skeletAudio\"\n              [src]=\"url | safe: 'url'\"\n            ></audio>\n            <ng-template #skeletAudio>\n              <ion-spinner></ion-spinner>\n            </ng-template>\n          </div>\n          <!-- video -->\n          <div *ngSwitchCase=\"item?.type?.startsWith('video')\">\n            <video\n              controls\n              autoplay\n              *ngIf=\"item | previewFile | async as url; else skeletAudio\"\n              [src]=\"url | safe: 'url'\"\n            ></video>\n            <ng-template #skeletAudio>\n              <ion-spinner></ion-spinner>\n            </ng-template>\n          </div>\n          <!-- others -->\n          <div *ngSwitchDefault>\n            <img class=\"default\" alt=\"default preview\" src=\"./assets/drive/images/my-doc.svg\" />\n          </div>\n        </ng-container>\n      </ion-col>\n      <ion-col size=\"12\" size-md=\"5\">\n        <ion-list lines=\"none\" class=\"ion-padding\">\n          <ion-item>\n            <ion-label class=\"ion-text-wrap\">\n              <p>Name</p>\n              <ion-text color=\"dark\">\n                <p>{{ item.name }}</p>\n              </ion-text>\n            </ion-label>\n          </ion-item>\n          <ion-item>\n            <ion-label>\n              <p>Type</p>\n              <ion-text color=\"dark\">\n                <p>{{ item.type }}</p>\n              </ion-text>\n            </ion-label>\n          </ion-item>\n          <ion-item>\n            <ion-label>\n              <p>Size</p>\n              <ion-text color=\"dark\">\n                <p>{{ item.size | bytesToSize }}</p>\n              </ion-text>\n            </ion-label>\n          </ion-item>\n          <ion-item>\n            <ion-label>\n              <p>IPFS CID</p>\n              <ion-text color=\"dark\">\n                <p class=\"ion-no-margin ion-text-wrap\">\n                  {{ item.cid }}\n                </p>\n              </ion-text>\n            </ion-label>\n            <!-- <ion-button\n              slot=\"end\"\n              fill=\"none\"\n              target=\"_blank\"\n              href=\"https://ipfs.io/ipfs/{{ item.cid }}\"\n            >\n              <ion-icon icon-only size=\"small\" name=\"open-outline\"></ion-icon>\n            </ion-button> -->\n          </ion-item>\n          <ion-item>\n            <ion-label class=\"ion-text-wrap withChip\">\n              <p class=\"ion-margin-bottom\">Encryption</p>\n              <ion-chip\n                color=\"primary\"\n                *ngIf=\"item?.accessControlConditions?.[0]?.method === ''\"\n              >\n                <ion-icon size=\"small\" name=\"lock-closed\"></ion-icon>\n                <ion-label>wallet address</ion-label>\n              </ion-chip>\n              <ion-chip\n                color=\"primary\"\n                *ngIf=\"item?.accessControlConditions?.[1]?.method === 'balanceOf'\"\n              >\n                <ion-icon name=\"lock-closed\"></ion-icon>\n                <ion-label>posess NFT</ion-label>\n              </ion-chip>\n              <ion-chip color=\"primary\" *ngIf=\"(item?.accessControlConditions?.length||0) <= 0\">\n                <ion-icon size=\"small\" name=\"lock-open\"></ion-icon>\n                <ion-label>Public</ion-label>\n              </ion-chip>\n              <ion-chip\n                color=\"primary\"\n                *ngIf=\"\n                  item.isFolder !== true &&\n                  (item.accessControlConditions | isShared: account)\n                \"\n              >\n                <ion-icon size=\"small\" name=\"share-social-outline\"></ion-icon>\n                <ion-label> shared </ion-label>\n              </ion-chip>\n            </ion-label>\n          </ion-item>\n          <ion-item>\n            <ion-label>\n              <p>Create date</p>\n              <ion-text color=\"dark\">\n                <p>{{ item.createdIsoDateTime | date: 'YYYY/MM/dd HH:mm' }}</p>\n              </ion-text>\n            </ion-label>\n          </ion-item>\n          <ion-item>\n            <ion-label>\n              <p>Last modified date</p>\n              <ion-text color=\"dark\">\n                <p>\n                  {{ item.lastModifiedIsoDateTime | date: 'YYYY/MM/dd HH:mm' }}\n                </p>\n              </ion-text>\n            </ion-label>\n          </ion-item>\n          <div class=\"ion-margin-top ion-padding\">\n            <ion-button\n              fill=\"solid\"\n              (click)=\"modalCtrl.dismiss(item, 'download')\"\n              >Download</ion-button\n            >\n            <ion-button\n              fill=\"outline\"\n              (click)=\"modalCtrl.dismiss(item, 'share')\"\n              >Share</ion-button\n            >\n          </div>\n        </ion-list>\n\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport { ModalController, PopoverController } from '@ionic/angular';\nimport { BehaviorSubject } from 'rxjs';\nimport { MediafileInterface } from '../../interfaces/mediafile.interface';\nimport { FilesOptionsListComponent } from '../files-options-list/files-options-list.component';\nimport { ItemPreviewComponent } from '../item-preview/item-preview.component';\n\nconst MAX_ITEMS_TO_DISPLAY = 25;\n@Component({\n  selector: 'hexa-items-container',\n  templateUrl: './items-container.component.html',\n  styleUrls: ['./items-container.component.scss'],\n})\nexport class ItemsContainerComponent implements OnChanges {\n  @Input() public account!: string | null;\n  @Input() public items!: MediafileInterface[] | null;\n  public readonly maxItemToDisplay$ = new BehaviorSubject(MAX_ITEMS_TO_DISPLAY);\n  @Output() public readonly actionsEvent: EventEmitter<{\n    type: string;\n    payload: any;\n  }> = new EventEmitter();\n\n  constructor(\n    private readonly _popCtrl: PopoverController,\n    private readonly _modalCtrl: ModalController\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    // reset max item to display when items change\n    if (\n      changes['items'] &&\n      changes['items'].currentValue &&\n      this.maxItemToDisplay$.value !== MAX_ITEMS_TO_DISPLAY\n    ) {\n      this.maxItemToDisplay$.next(MAX_ITEMS_TO_DISPLAY);\n    }\n  }\n\n  async actions(type: string, payload?: any) {\n    switch (true) {\n      case type === 'openOptions': {\n        const { event = undefined, item = undefined } = payload;\n        if (!event || !item) {\n          throw new Error('openOptions(): payload is invalid');\n        }\n        await this._openOptions(event, item);\n        break;\n      }\n      case type === 'displayMoreItem': {\n        const totalItem = this.items?.length || 0;\n        const max = this.maxItemToDisplay$.value;\n        const t = setTimeout(async () => {\n          payload.target.complete();\n          this.maxItemToDisplay$.next(this.maxItemToDisplay$.value + 10);\n          // App logic to determine if all data is loaded\n          // and disable the infinite scroll\n          if (max >= totalItem) {\n            payload.target.disabled = true;\n          }\n          clearTimeout(t);\n        }, 500);\n        break;\n      }\n      case type === 'preview': {\n        this._preview(payload.item);\n        break;\n      }\n    }\n    this.actionsEvent.emit({ type, payload });\n  }\n\n  trackByFn(index: number) {\n    return index;\n  }\n\n  private async _preview(item: MediafileInterface) {\n    const account = this.account;\n    const ionModal = await this._modalCtrl.create({\n      component: ItemPreviewComponent,\n      componentProps: {\n        item,\n        account,\n      },\n      cssClass: 'ion-modal-preview-file',\n    });\n    await ionModal.present();\n    const { data, role = 'cancel' } = await ionModal.onDidDismiss();\n    this.actions(role, { item: data });\n  }\n\n  private async _openOptions($event: MouseEvent, item: MediafileInterface) {\n    const ionPopover = await this._popCtrl.create({\n      component: FilesOptionsListComponent,\n      componentProps: { isFolder: item.isFolder },\n      event: $event,\n      translucent: true,\n      mode: 'md',\n    });\n    await ionPopover.present();\n    // handle close event\n    const { data: type, role } = await ionPopover.onDidDismiss();\n    if (role === 'close') {\n      return;\n    }\n    await this.actions(type, { item, $event });\n  }\n}\n","<ion-grid class=\"ion-no-padding\">\n  <ion-row \n      *ngFor=\"\n        let item of (items||[]) | slice: 0:maxItemToDisplay$.value;trackBy: trackByFn\n      \"\n      (click)=\"item.isFolder ? actions('navTo', {item}) : actions('preview', {item})\"\n      class=\"item ion-align-items-center ion-padding-start\">\n    <ion-col\n        class=\"ion-align-items-center pointer\"\n        size=\"auto\"\n        [ngStyle]=\"{ display: 'flex' }\">\n      <ion-icon\n        size=\"large\"\n        [name]=\"item.isFolder !== true ? 'document-outline' : 'folder-outline' \"></ion-icon>\n    </ion-col>\n    <ion-col\n        class=\"ion-align-items-center ion-text-wrap pointer\"\n        size=\"auto\"\n        [ngStyle]=\"{ display: 'flex' }\">\n      <ion-text class=\"ion-padding-start\">\n        {{ item.name }}\n      </ion-text>\n    </ion-col>\n    <ion-col size=\"auto\" class=\"ion-hide-md-down\">\n      <ion-chip\n        color=\"primary\"\n        size=\"small\"\n        class=\"ion-margin-start\"\n        *ngIf=\"\n          item.isFolder !== true &&\n          (item.accessControlConditions | isShared: account)\n        \"\n        (click)=\"$event.stopPropagation(); actions('share', {item})\"\n      >\n        <ion-icon size=\"small\" name=\"share-social-outline\"></ion-icon>\n        <ion-label> shared </ion-label>\n      </ion-chip>\n      <ion-chip\n        color=\"primary\"\n        size=\"small\"\n        class=\"ion-margin-start\"\n        *ngIf=\"(item?.accessControlConditions||[]).length <= 0 && item.isFolder !== true\"\n        (click)=\"$event.stopPropagation(); actions('lockFile', item)\"\n      >\n        <ion-icon size=\"small\" name=\"lock-open-outline\"></ion-icon>\n        <ion-label> public </ion-label>\n      </ion-chip>\n    </ion-col>\n    <ion-col\n      class=\"ion-text-right ion-align-items-center ion-justify-content-end\"\n      [ngStyle]=\"{ display: 'flex' }\"\n    >\n      <ion-text\n        *ngIf=\"item.isFolder !== true\"\n        color=\"medium\"\n        class=\"ion-hide-md-down\"\n      >\n        {{ item.size | bytesToSize }}\n      </ion-text>\n      <ion-fab-button\n        size=\"small\"\n        translucent=\"true\"\n        mode=\"ios\"\n        (click)=\"\n          $event.stopPropagation();\n          actions('openOptions', { event: $event, item })\n        \"\n      >\n        <ion-icon\n          color=\"medium\"\n          size=\"small\"\n          color=\"primary\"\n          name=\"ellipsis-vertical\"\n        ></ion-icon>\n      </ion-fab-button>\n    </ion-col>\n  </ion-row>\n</ion-grid>","import { Component, Input } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { BehaviorSubject, map } from 'rxjs';\nimport { MediafileInterface } from '../../interfaces/mediafile.interface';\n\n@Component({\n  selector: 'hexa-select-folder',\n  templateUrl: './select-folder.component.html',\n  styleUrls: ['./select-folder.component.scss'],\n})\nexport class SelectFolderComponent {\n  @Input() readonly folders!: MediafileInterface[];\n  public selelected: MediafileInterface | undefined;\n  public readonly queryItem$ = new BehaviorSubject({\n    _id: 'root',\n    parent: undefined,\n  } as any);\n  public readonly lookUp$ = this.queryItem$.pipe(\n    map((query) => {\n      const result = this.folders?.filter(\n        (folder) => folder.parent === query._id\n      );\n      console.log(this.folders, result, query);\n      return result;\n    })\n  );\n\n  constructor(public readonly modalCtrl: ModalController) {}\n\n  public async navBack() {\n    const folder = this.folders.find(\n      (f) => f._id === this.queryItem$.value.parent\n    );\n    if (folder) {\n      this.queryItem$.next(folder);\n    } else {\n      this.queryItem$.next({ _id: 'root', parent: undefined } as any);\n    }\n  }\n}\n","<ion-header *ngIf=\"queryItem$|async as queryItem\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button icon-only *ngIf=\"queryItem._id !== 'root'\" (click)=\"navBack()\">\n        <ion-icon name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ queryItem.name }}</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button icon-only (click)=\"modalCtrl.dismiss(undefined, 'cancel')\">\n        <ion-icon name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ion-list *ngIf=\"lookUp$|async as lookUp\">\n    <ion-item \n        *ngFor=\"let item of lookUp\" \n        [ngClass]=\"{'selected': item._id === selelected?._id}\"\n        (click)=\"selelected?._id ? selelected = undefined : selelected = item;\">\n      <ion-icon slot=\"start\" name=\"folder-open-outline\"></ion-icon>\n      <ion-label>\n        {{ item.name }}\n      </ion-label>\n      <ion-button fill=\"none\" slot=\"end\" (click)=\"$event.stopPropagation();queryItem$.next(item);selelected = undefined\">\n        <ion-icon name=\"arrow-forward\"></ion-icon>\n      </ion-button>\n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer>\n  <ion-toolbar>\n    <ion-button \n        slot=\"end\" \n        size=\"small\"\n        [disabled]=\"selelected === undefined\" \n        (click)=\"modalCtrl.dismiss(selelected, 'ok')\">\n      Move\n    </ion-button>\n  </ion-toolbar>\n</ion-footer>\n","import { Component, Input } from '@angular/core';\nimport { FormArray, FormControl, FormGroup } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport {\n  IAccessControlConditions,\n  MediafileInterface\n} from '../../interfaces/mediafile.interface';\n\n@Component({\n  selector: 'hexa-setup-encryption',\n  templateUrl: './setup-encryption.component.html',\n  styleUrls: ['./setup-encryption.component.scss'],\n})\nexport class SetupEncryptionComponent {\n  @Input() walletAddress!: string;\n  // @Input() chainName!: string;\n  @Input() item!: MediafileInterface;\n  form!: FormGroup;\n  isDisplayConditionForm = false;\n  accordionsOpen: string[] = [];\n  constructor(public readonly modalCtrl: ModalController) {}\n\n  ionViewWillEnter() {\n    this._buildForm();\n    if (this.item?.accessControlConditions?.length) {\n      this.isDisplayConditionForm = true;\n      this._patchValues(this.item.accessControlConditions);\n    }\n  }\n\n  private _buildForm() {\n    this.form = new FormGroup({\n      walletAddress: new FormGroup({\n        selected: new FormControl(false),\n        values: new FormArray([new FormControl(this.walletAddress)]),\n      }),\n      nftOwner: new FormGroup({\n        selected: new FormControl(false),\n        values: new FormArray([new FormControl()]),\n      }),\n      daoMember: new FormGroup({\n        selected: new FormControl(false),\n        values: new FormArray([new FormControl()]),\n      }),\n    });\n  }\n\n  private _patchValues(accessControlConditions: IAccessControlConditions[]) {\n    const accordionsOpen: string[] = [];\n    const walletsAddress: string[] = [];\n    let nftContractAddress: string | undefined;\n    let daoContractAddress: string | undefined;\n    accessControlConditions.forEach((condition) => {\n      if (this._isWalletAddressEcryptionCondition(condition)) {\n        accordionsOpen.push('walletAddress');\n        walletsAddress.push(condition.returnValueTest.value);\n      }\n    });\n    this.form\n      .get('walletAddress')\n      ?.get('selected')\n      ?.patchValue(walletsAddress.length > 0);\n    const walletAddressArrayValue = (this.form.get('walletAddress')?.get('values') as FormArray)\n    walletAddressArrayValue.clear();\n    walletsAddress.forEach((address) => {\n      walletAddressArrayValue.push(new FormControl(address));\n    });\n    // this.form.get('nftOwner')?.get('values')?.patchValue([nftContractAddress]);\n    // this.form.get('daoMember')?.get('values')?.patchValue([daoContractAddress]);\n    this.accordionsOpen = accordionsOpen;\n  }\n\n  public addValue(controlname: string, value: string) {\n    const control = this.form.get(controlname) as FormArray;\n    control.push(new FormControl(value));\n  }\n\n  public removeValue(controlname: string, index: number) {\n    const control = this.form.get(controlname) as FormArray;\n    control.removeAt(index);\n  }\n\n  public toggleCondition(controlname: string) {\n    const control = this.form.get(controlname) as FormGroup;\n    control.get('selected')?.setValue(!control.get('selected')?.value);\n  }\n\n  public async submit() {\n    const result = {\n      walletsAddress: [],\n      nftContractAddress: undefined,\n      daoContractAddress: undefined,\n    };\n    if (this.form.get('walletAddress')?.get('selected')?.value === true) {\n      result.walletsAddress = this.form\n        .get('walletAddress')\n        ?.get('values')?.value;\n    }\n    if (this.form.get('nftOwner')?.get('selected')?.value === true) {\n      result.nftContractAddress = this.form\n        .get('nftOwner')\n        ?.get('values')\n        ?.value?.pop();\n    }\n    if (this.form.get('daoMember')?.get('selected')?.value === true) {\n      result.daoContractAddress = this.form\n        .get('daoMember')\n        ?.get('values')\n        ?.value?.pop();\n    }\n    const conditions = this._normalizeData(result);\n    await this.modalCtrl.dismiss(conditions, 'ok');\n  }\n\n  private _normalizeData(data: {\n    walletsAddress: string[];\n    nftContractAddress?: string;\n    daoContractAddress?: string;\n  }) {\n    const accessControlConditions = [];\n    if (data.walletsAddress.length) {\n      accessControlConditions.push(\n        ...data.walletsAddress.map((value) => {\n          return {\n            contractAddress: '',\n            standardContractType: '',\n            method: '',\n            parameters: [':userAddress'],\n            returnValueTest: {\n              comparator: '=',\n              value,\n            },\n          };\n        })\n      );\n    }\n    if (data.nftContractAddress) {\n      accessControlConditions.push({\n        contractAddress: data.nftContractAddress,\n        standardContractType: 'ERC721',\n        method: 'balanceOf',\n        parameters: [':userAddress'],\n        returnValueTest: {\n          comparator: '>',\n          value: '0',\n        },\n      });\n    }\n    if (data.daoContractAddress) {\n      accessControlConditions.push({\n        contractAddress: data.daoContractAddress,\n        standardContractType: 'ERC20',\n        method: 'members',\n        parameters: [':userAddress'],\n        returnValueTest: {\n          comparator: '=',\n          value: 'true',\n        },\n      });\n    }\n    // add object `or` condition between each condition\n    const result = accessControlConditions\n      .map((condition, i) => {\n        if (i === accessControlConditions.length - 1) {\n          return [condition];\n        }\n        return [condition, { operator: 'or' }];\n      })\n      .flat()\n      .map((condition: any) => {\n        if (condition.operator) {\n          return condition;\n        }\n        return {\n          // chain: this._normalizeChainName(this.chainName),\n          ...condition,\n        };\n      });\n    return result;\n  }\n\n  private _isWalletAddressEcryptionCondition(\n    encryptAccessCondition: IAccessControlConditions\n  ) {\n    return (\n      encryptAccessCondition.method === '' &&\n      encryptAccessCondition.parameters.includes(':userAddress')\n    );\n  }\n\n  private _normalizeChainName(name: string) {\n    return name.toLowerCase()\n      .replace(' ', '-')\n      .replace('matic', 'polygon');\n  }\n}\n","<div class=\"wrapper ion-padding\">\n  <ion-grid>\n    <ion-row>\n      <ion-col>\n        <ion-text color=\"dark\">\n          <h1 class=\"ion-no-margin\">\n            <span\n              >{{ !item ? '' : 'Shared ' }}Encryption\n              {{ !item ? '' : 'condition' }}\n            </span>\n          </h1>\n        </ion-text>\n      </ion-col>\n    </ion-row>\n    <ion-row\n      *ngIf=\"isDisplayConditionForm === false\"\n      class=\"ion-align-items-start\"\n    >\n      <!-- <ion-col size=\"auto\">\n        <ion-img class=\"logo-lit\" src=\"./assets/drive/images/lit-logo.svg\"></ion-img>\n      </ion-col> -->\n      <ion-col>\n        <ion-text color=\"dark\">\n          <p>\n            Would you like to strengthen the security of your data using cryptographic encryption?\n          </p>\n          <p>\n            This will allow you to define custom controls access condition to\n            your data to prevent unauthorized access.\n          </p>\n        </ion-text>\n        <div class=\"ion-text-end\">\n          <ion-button color=\"danger\" fill=\"clear\" (click)=\"modalCtrl.dismiss(null, 'cancel')\">\n            cancel\n          </ion-button>\n          <ion-button fill=\"outline\" (click)=\"modalCtrl.dismiss([], 'ok')\">\n            No, start upload\n          </ion-button>\n          <ion-button (click)=\"isDisplayConditionForm = true\"> Yes </ion-button>\n        </div>\n      </ion-col>\n    </ion-row>\n    <ion-row *ngIf=\"isDisplayConditionForm === true\">\n      <ion-col *ngIf=\"form\">\n        <ion-text color=\"primary\">\n          <p>Define access conditions to your data.</p>\n        </ion-text>\n        <!-- Chain Id -->\n        <!-- <ion-item class=\"header\">\n          <ion-label>Blockchain</ion-label>\n          <ion-note slot=\"end\" color=\"primary\">\n            {{ chainName }}\n          </ion-note>\n        </ion-item> -->\n        <form [formGroup]=\"form\" class=\"ion-padding-bottom\">\n          <ion-accordion-group [multiple]=\"true\" [value]=\"accordionsOpen\">\n            <!-- By wallets address owner -->\n            <ion-accordion\n              value=\"walletAddress\"\n              toggleIcon=\"\"\n              toggleIconSlot=\"end\"\n              formGroupName=\"walletAddress\"\n            >\n              <ion-item\n                slot=\"header\"\n                class=\"header\"\n                (click)=\"toggleCondition('walletAddress')\"\n              >\n                <ion-label>Access by wallet address</ion-label>\n                <ion-icon\n                  slot=\"end\"\n                  color=\"primary\"\n                  [name]=\"\n                    form.get('walletAddress')?.get('selected')?.value === true\n                      ? 'checkbox'\n                      : 'square-outline'\n                  \"\n                ></ion-icon>\n              </ion-item>\n              <div class=\"ion-padding-vertical container\" slot=\"content\">\n                <ion-chip\n                  color=\"primary\"\n                  *ngFor=\"\n                    let el of form.get('walletAddress')?.get('values')?.value;\n                    let i = index\n                  \"\n                >\n                  {{ el | sliceAddress }}\n                  <small *ngIf=\"el === walletAddress\" class=\"ion-margin-start\"\n                    >(me)</small\n                  >\n                  <ion-icon\n                    *ngIf=\"el !== walletAddress\"\n                    name=\"close-circle\"\n                    (click)=\"removeValue('walletAddress.values', i)\"\n                  ></ion-icon>\n                </ion-chip>\n                <br />\n                <ion-item>\n                  <ion-input\n                    #inputWalletAddress\n                    placeholder=\"add wallet address\"\n                    type=\"text\"\n                  ></ion-input>\n                  <ion-button\n                    size=\"small\"\n                    fill=\"outline\"\n                    slot=\"end\"\n                    (click)=\"\n                      addValue(\n                        'walletAddress.values',\n                        inputWalletAddress.value + ''\n                      );\n                      inputWalletAddress.value = ''\n                    \"\n                    >add</ion-button\n                  >\n                </ion-item>\n              </div>\n            </ion-accordion>\n            <!-- By NFT contract holders\n            <ion-accordion \n                value=\"nftOwner\" \n                toggleIcon=\"\" \n                toggleIconSlot=\"end\"\n                formGroupName=\"nftOwner\">\n              <ion-item \n                  slot=\"header\" \n                  class=\"header\"\n                  (click)=\"toggleCondition('nftOwner')\">\n                <ion-label>Must posess any token in an ERC721 collection (NFT Collection)</ion-label>\n                <ion-icon \n                    slot=\"end\"\n                    color=\"primary\" \n                    [name]=\"form.get('nftOwner')?.get('selected')?.value === true ? 'checkbox': 'square-outline'\"></ion-icon>\n              </ion-item>\n              <div slot=\"content\" class=\"container\">\n                <ion-item formArrayName=\"values\" class=\"ion-padding-vertical\">\n                  <ion-input placeholder=\"add collection contract address\" formControlName=\"0\" type=\"text\"></ion-input>\n                </ion-item>\n              </div>\n            </ion-accordion> -->\n            <!-- By DAO members\n            <ion-accordion \n                disabled=\"true\"\n                value=\"daoMember\" \n                toggleIcon=\"\" \n                toggleIconSlot=\"end\"\n                formGroupName=\"daoMember\">\n              <ion-item \n                  slot=\"header\" \n                  class=\"header\"\n                  (click)=\"toggleCondition('daoMember')\">\n                <ion-label>Must be a member of a DAO</ion-label>\n                <ion-icon \n                    slot=\"end\" \n                    color=\"primary\" \n                    [name]=\"form.get('daoMember')?.get('selected')?.value === true ? 'checkbox': 'square-outline'\"></ion-icon>\n              </ion-item>\n              <div slot=\"content\" class=\"container\">\n                <ion-item formArrayName=\"values\">\n                  <ion-label position=\"stacked\">DAO contract address</ion-label>\n                  <ion-input formControlName=\"0\" type=\"text\"></ion-input>\n                </ion-item>\n              </div>\n            </ion-accordion> -->\n          </ion-accordion-group>\n        </form>\n        <ion-item class=\"ion-margin-top\" color=\"warning\">\n          <ion-icon slot=\"start\" name=\"warning\"></ion-icon>\n          <ion-label class=\"ion-text-wrap\">\n            <span>\n              By enabling encryption, you will not be able to access your data\n              without the correct access conditions. <br />\n              Check again Addresses before validate\n              encryption access conditions rules.\n            </span>\n          </ion-label>\n        </ion-item>\n      </ion-col>\n      <ion-col size=\"12\" class=\"ion-padding-top ion-text-end\">\n        <ion-button fill=\"outline\" (click)=\"modalCtrl.dismiss(null, 'cancel')\">\n          Cancel\n        </ion-button>\n        <!-- disable button if form is not touched oor invalid -->\n        <ion-button [disabled]=\"form.invalid\" (click)=\"submit()\">\n          Start {{ !item ? 'upload' : 'share' }}\n        </ion-button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n","import { Component, ElementRef, Inject, ViewChild } from '@angular/core';\nimport { IAuthService, ILoadingService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { AlertController, AlertOptions, IonSearchbar, ModalController, ToastController, ToastOptions } from '@ionic/angular';\nimport { OverlayBaseController } from '@ionic/angular/util/overlay';\nimport { firstValueFrom, map } from 'rxjs';\nimport { SelectFolderComponent } from '../../components/select-folder/select-folder.component';\nimport { SetupEncryptionComponent } from '../../components/setup-encryption/setup-encryption.component';\nimport { MediafileInterface } from '../../interfaces/mediafile.interface';\nimport { MediaFileService } from '../../services/mediafile.service';\n\n@Component({\n  selector: 'hexa-drive-page',\n  templateUrl: './drive-page.component.html',\n  styleUrls: ['./drive-page.component.scss'],\n})\nexport class DrivePageComponent {\n\n  @ViewChild(IonSearchbar, { static: false, read: ElementRef })\n  public readonly searchbarElement!: ElementRef<IonSearchbar>;\n\n  @ViewChild('addFileElement', { static: false, read: ElementRef })\n  public readonly addFileElement!: ElementRef<HTMLInputElement>;\n  public readonly account$ = this._authService.account$;\n  public readonly items$ = this._mediaFileService.items$;\n  public readonly allMedia$ = this._mediaFileService.allMedia$;\n  public readonly breadcrumbs$ = this._mediaFileService.breadcrumbs$.pipe(\n    map((breadcrumbs) => {\n      const maxBreadcrumbs = this.maxBreadcrumbs;\n      if (breadcrumbs.length > maxBreadcrumbs) {\n        breadcrumbs.splice(0, breadcrumbs.length - maxBreadcrumbs);\n      }\n      return breadcrumbs;\n    })\n  );\n  private readonly maxBreadcrumbs = 3;\n\n  constructor(\n    private readonly _mediaFileService: MediaFileService,\n    private readonly _toastCtrl: ToastController,\n    private readonly _alertCtrl: AlertController,\n    private _modalCtrl: ModalController,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)) private readonly _authService: IAuthService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_LOADER_SERVICE)) private readonly _loaderService: ILoadingService,\n  ) {}\n\n  async ionViewDidEnter() {\n    this._loaderService.setStatus(true);\n    await this._mediaFileService.getFiles();\n    this._loaderService.setStatus(false);\n  }\n\n  async actions(type: string, payload?: any) {\n    console.log('[INFO] DrivePageComponent.actions():', type, payload);\n    switch (true) {\n      case type === 'addFile':\n        this.searchbarElement.nativeElement.value = '';\n        this.addFileElement.nativeElement.click();\n        break;\n      case type === 'onFileChange': {\n        this.searchbarElement.nativeElement.value = '';\n        const target = payload.target as HTMLInputElement;\n        const files = [...Array.from(target.files||[])];\n        if (!files[0]) {\n          target.value = '';\n          return;\n        }\n        // ask for encryption\n        const {data: conditions, role } = await this._askFoEncryption();\n        // check if user canceled operation\n        if (!conditions || role === 'cancel') {\n          target.value = '';\n          return;\n        }\n        this._loaderService.setStatus(true);\n        let i = 0;\n        while (i !== files.length) {\n          await this._mediaFileService.upload({\n            file: files[i], \n            accessControlConditions: conditions,\n            fromAccount: this._authService.account$.value,\n          });\n          ++i;\n        }\n        this._loaderService.setStatus(false);\n        // notify user that files was uploaded successfully\n        const opts: ToastOptions = {\n          message: `File${files.length > 1 ? 's' : ''} uploaded successfully`,\n          duration: 2000,\n          position: 'bottom',\n          color: 'primary',\n          buttons: [\n            {\n              text: 'ok',\n              side: 'end',\n              handler: async () => await this._toastCtrl.dismiss(),\n            },\n          ],\n          keyboardClose: true,\n        };\n        await this._displayMessage(this._toastCtrl, opts);\n        target.value = '';\n        break;\n      }\n      case type === 'searchByName': {\n        const {\n          detail: { value = null },\n        } = payload;\n        this._mediaFileService.searchByName(value);\n        break;\n      }\n      case type === 'reload':\n        this.searchbarElement.nativeElement.value = '';\n        await this.ionViewDidEnter();\n        break;\n      case type === 'navTo': {\n        this.searchbarElement.nativeElement.value = '';\n        const { item: { _id } = null } = payload;\n        this._mediaFileService.navToFolderId(_id);\n        break;\n      }\n      case type === 'newFolder': {\n        this.searchbarElement.nativeElement.value = '';\n        await  this._createFolder();\n        break;\n      }\n      case type === 'delete': {\n        const { item: { _id = null, isFolder = false } = null } = payload;\n        if (!_id) {\n          throw new Error('delete(): payload is invalid');\n        }\n        this._deleteItem(_id, isFolder);\n        break;\n      }\n      case type === 'download': {\n        const { item: { _id = null, isFolder = false } = null } = payload;\n        if (!_id || isFolder) {\n          throw new Error('download(): payload is invalid');\n        }\n        await this._downloadFile(_id);\n        break;\n      }\n      case type === 'rename': {\n        const { item: { _id = null, name = null } = {} } = payload;\n        if (!_id) {\n          throw new Error('rename(): payload is invalid');\n        }\n        await this._rename(_id);\n        break;\n      }\n      case type === 'move': {\n        this.searchbarElement.nativeElement.value = '';\n        const { item: { _id = null } = null } = payload;\n        if (!_id) {\n          throw new Error('move(): payload is invalid');\n        }\n        await this._move(_id);\n        break;\n      }\n      case type === 'share': {\n        const { item = null } = <{ item?: MediafileInterface }>payload;\n        if (!item || item.isFolder) {\n          throw new Error('share(): payload is invalid');\n        }\n        await this._share(item);\n        break;\n      }\n    }\n  }\n\n  private async _createFolder() {\n    // ask for folder name\n    const alertOpts: AlertOptions = {\n      header: 'Create new Folder',\n      message: 'Enter folder name',\n      inputs: [\n        {\n          name: 'folderName',\n          type: 'text',\n          placeholder: 'Folder Name',\n          attributes: {\n            require: true,\n            minlength: 1,\n          }\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n        },\n        {\n          text: 'Create',\n          role: 'ok',\n        },\n      ],\n      mode: 'ios',\n    };\n    const { data, role } = await this._displayMessage(\n      this._alertCtrl,\n      alertOpts\n    );\n    if (role !== 'ok' || !data.values.folderName) {\n      return;\n    }\n    this._loaderService.setStatus(true);\n    await this._mediaFileService.createFolder(data.values.folderName);\n    this._loaderService.setStatus(false);\n    // notify user that folder was successfully created\n    const notifOpts: ToastOptions = {\n      message: 'Folder successfully created',\n      duration: 2000,\n      position: 'bottom',\n      color: 'primary',\n      buttons: [\n        {\n          text: 'ok',\n          side: 'end',\n          handler: async () => await this._toastCtrl.dismiss(),\n        },\n      ],\n      keyboardClose: true,\n    };\n    await this._displayMessage(this._toastCtrl, notifOpts);\n  }\n\n  private async _deleteItem(_id: string, isFolder?: boolean) {\n    // prompt to confirm delete if is a folder\n    if (isFolder) {\n      const alertOpts = {\n        header: 'Delete Folder',\n        message: `\n          <p>Are you sure you want to delete this folder? All files and subfolders will be deleted.</p>\n        `,\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel',\n          },\n          {\n            text: 'Delete',\n            role: 'confirm',\n          },\n        ],\n      };\n      const { role } = await this._displayMessage(\n        this._alertCtrl, \n        alertOpts\n      );\n      if (role !== 'confirm') {\n        return;\n      }\n    }\n    this._loaderService.setStatus(true);\n    await this._mediaFileService.delete(_id);\n    this._loaderService.setStatus(false);\n    // notify user that file was uploaded successfully\n    const toastOpts: ToastOptions = {\n      message: `${isFolder ? 'Folder' : 'File'} deleted successfully`,\n      duration: 2000,\n      position: 'bottom',\n      color: 'primary',\n      buttons: [\n        {\n          text: 'ok',\n          side: 'end',\n          handler: async () => await this._toastCtrl.dismiss(),\n        },\n      ],\n      keyboardClose: true,\n    };\n    await this._displayMessage(\n      this._toastCtrl, \n      toastOpts\n    );\n  }\n\n  private async _downloadFile(_id: string) {\n    this._loaderService.setStatus(true);\n    await this._mediaFileService.downloadFile(_id);\n    this._loaderService.setStatus(false);\n\n  }\n\n  private async _rename(_id: string) {\n    // get current name\n    const item = await firstValueFrom(\n      this.items$.pipe(\n        map(items => items.find(item => item._id === _id))\n    ));\n    const { name = null } = item || {};\n    // ask for new name\n    const opts = {\n      header: 'Rename',\n      message: 'Enter new name',\n      inputs: [\n        {\n          name: 'newName',\n          type: 'text',\n          placeholder: 'New Name',\n          value: name,\n        },\n      ],\n      buttons: [\n        { text: 'Cancel', role: 'cancel' },\n        { text: 'Rename', role: 'ok' },\n      ],\n      mode: 'ios',\n    };\n    const { data, role } = await this._displayMessage(\n      this._alertCtrl,\n      opts\n    );\n    if (role !== 'ok' || !data.values.newName) {\n      return;\n    }\n    this._loaderService.setStatus(true);\n    await this._mediaFileService.rename(_id, data.values.newName);\n    this._loaderService.setStatus(false);\n  }\n\n  private async _move(_id: string) {\n    const folders = await this._mediaFileService.getAllFolders();\n    const ionModal = await this._modalCtrl.create({\n      component: SelectFolderComponent,\n      componentProps: {\n        folders,\n      },\n      cssClass: 'modalSelectFolder',\n    });\n    await ionModal.present();\n    const { data, role } = await ionModal.onDidDismiss();\n    console.log('move(): data: ', data, role);\n    if (role !== 'ok' || !data) {\n      return;\n    }\n    this._loaderService.setStatus(true);\n    this._mediaFileService.moveTo(_id, data);\n    this._loaderService.setStatus(false);\n    await this._displayMessage(this._toastCtrl, {\n      message: 'File moved successfully',\n      duration: 1200,\n      position: 'bottom',\n      color: 'primary',\n      buttons: [\n        {\n          text: 'ok',\n          side: 'end',\n          handler: async () => await this._toastCtrl.dismiss(),\n        },\n      ],\n      keyboardClose: true,\n    });\n  }\n\n  private async _share(item: MediafileInterface) {\n    if (!item.accessControlConditions && !item.encryptedSymmetricKey) {\n      // TODO: use browser API too share CID link from IPFS gateway\n      const param = `${item.cid}.${item.name.split('.').pop()}`;\n      const host = window.location.origin;\n      const url = `${host}/#/ipfs/${param}`;\n      await this._mediaFileService.shareWithWebAPI(item, url);\n    } else {\n      // // open share modal\n      const ionModal = await this._modalCtrl.create({\n        component: SetupEncryptionComponent,\n        cssClass: 'modalAlert',\n        componentProps: {\n          item,\n          walletAddress: this._authService.account$.value,\n          chainName: this._authService.signer$.value.provider.network.name,\n        },\n      });\n      await ionModal.present();\n      const { data: accessControlConditions, role } = await ionModal.onDidDismiss();\n      if (role !== 'ok' || !accessControlConditions) {\n        return;\n      }\n      // send new condition to shared method from media file service\n      this._loaderService.setStatus(true);\n      await this._mediaFileService.shareWithEncryption(\n        {\n          ...item,\n          accessControlConditions,\n        },\n        this._authService.account$.value\n      );\n      this._loaderService.setStatus(false);\n      // notify user that file was uploaded successfully\n      const opts: ToastOptions = {\n        message: `File shared successfully`,\n        duration: 2000,\n        position: 'bottom',\n        color: 'primary',\n        buttons: [\n          {\n            text: 'ok',\n            side: 'end',\n            handler: async () => await this._toastCtrl.dismiss(),\n          },\n        ],\n        keyboardClose: true,\n      };\n      await this._displayMessage(this._toastCtrl, opts);\n    }\n\n  }\n  \n  private async _askFoEncryption() {\n    const walletAddress = this._authService.account$.value;\n    // const {chainId, name: chainName} = this._authService.signer$.value.provider.network;\n    const ionModal = await this._modalCtrl.create({\n      component: SetupEncryptionComponent,\n      cssClass: 'modalAlert',\n      componentProps: {\n        walletAddress,\n        // chainName\n      },\n    });\n    await ionModal.present();\n    const { data, role } = await ionModal.onDidDismiss();\n    return {data, role};\n  }\n\n  private async _displayMessage<T>(\n    ctrl: OverlayBaseController<T, any>,\n    opts: any\n  ) {\n    const ctrlInstance = await ctrl.create(opts);\n    await ctrlInstance.present();\n    const { data, role } = await ctrlInstance.onDidDismiss();\n    return { data, role };\n  }\n}","<ion-header collapse=\"fade\" mode=\"ios\">\n  <hexa-ui-header>\n    <ng-container slot=\"start\">\n      <ion-searchbar\n        enterkeyhint=\"search\"\n        inputmode=\"search\"\n        mode=\"ios\"\n        [debounce]=\"500\"\n        (ionChange)=\"actions(\n          'searchByName',\n          $event\n        )\"></ion-searchbar>\n    </ng-container>\n    <ng-container slot=\"end\">\n      <ion-button color=\"primary\" fill=\"clear\" (click)=\"actions('reload')\">\n        <ion-icon name=\"sync\"></ion-icon>\n      </ion-button>\n      <ion-button color=\"primary\" (click)=\"addFileElement.click()\">\n        Add Files\n      </ion-button>\n      <ion-button color=\"primary\" fill=\"outline\" (click)=\"actions('newFolder')\">\n        New Folder\n      </ion-button>\n    </ng-container>\n  </hexa-ui-header>\n</ion-header>\n<ion-menu side=\"end\" menuId=\"seconde\" contentId=\"drive\">\n  <ion-header>\n    <ion-toolbar color=\"primary\">\n      <ion-title>Start Menu</ion-title>\n    </ion-toolbar>\n  </ion-header>\n  <ion-content>\n    <ion-list>\n      <ion-item>Menu Item</ion-item>\n      <ion-item>Menu Item</ion-item>\n      <ion-item>Menu Item</ion-item>\n      <ion-item>Menu Item</ion-item>\n      <ion-item>Menu Item</ion-item>\n    </ion-list>\n  </ion-content>\n</ion-menu>\n<ion-content \n    fullscreen\n    id=\"drive\" \n    class=\"ion-padding-horizontal\">\n  <ion-grid>\n    <ion-row class=\"ion-align-items-start\">\n      <!-- Wrapper -->\n      <ion-col size=\"12\" *ngIf=\"items$ | async as items; else skeletonHTML\">\n        <!-- Media Content -->\n        <ng-container>\n          <ion-grid class=\"header-grid\">\n            <ion-row class=\"ion-align-items-center ion-padding-vertical\">\n              <hexa-breadcrumbs \n                [breadcrumbs]=\"breadcrumbs$|async\"\n                [isSearching]=\"(searchbarElement?.nativeElement?.value?.length || 0) > 0\"\n                (actions)=\"actions($event.type, $event.payload)\"></hexa-breadcrumbs>\n              <ion-col class=\"ion-no-padding\">\n                <span lines=\"none\" class=\"ion-float-end item-stats ion-text-end\">\n                  <ion-label color=\"medium\"\n                    >\n                    {{\n                      (allMedia$ | async) | totalStorage | bytesToSize\n                    }}\n                    Storage</ion-label\n                  >\n                </span>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n          <div>\n            <hexa-items-container \n              [items]=\"items\"\n              [account]=\"account$.value\"\n              (actionsEvent)=\"actions($event.type, $event.payload)\"></hexa-items-container>\n            <hexa-dropable \n              *ngIf=\"items.length <= 0\"\n              (actions)=\"actions($event.type, $event.payload)\"></hexa-dropable>\n          </div>\n          <ion-infinite-scroll\n              *ngIf=\"items.length > 0\"\n              threshold=\"100px\"\n              (ionInfinite)=\"actions('displayMoreItem', $event)\">\n            <ion-infinite-scroll-content\n              loadingSpinner=\"bubbles\"\n              loadingText=\"Loading more data...\"></ion-infinite-scroll-content>\n          </ion-infinite-scroll>\n        </ng-container>\n      </ion-col>\n      <!-- Skeleton loading HTML -->\n      <ng-template #skeletonHTML>\n        <ion-col size=\"12\">\n          <ion-grid class=\"ion-no-padding\">\n            <ion-row\n                *ngFor=\"let el of [].constructor(10)\"\n                role=\"article\"\n                class=\"item clickable ion-align-items-center ion-padding-start\">\n                <ion-col size=\"1\" class=\"ion-padding\">\n                  <ion-skeleton-text animated style=\"width: 100%\"></ion-skeleton-text>\n                </ion-col>\n                <ion-col size=\"9\" class=\"ion-padding-vertical\">\n                  <ion-skeleton-text animated style=\"width: 100%\"></ion-skeleton-text>\n                </ion-col>\n                <ion-col size=\"2\" class=\"ion-padding\">\n                  <ion-skeleton-text animated style=\"width: 100%\"></ion-skeleton-text>\n                </ion-col>\n              </ion-row>\n          </ion-grid>\n        </ion-col>\n      </ng-template>\n    </ion-row>\n  </ion-grid>\n  <!-- mobile controls -->\n  <ion-fab slot=\"fixed\" horizontal=\"end\" vertical=\"bottom\" class=\"ion-hide-md-up\">\n    <ion-fab-button>\n      <ion-icon name=\"add\"></ion-icon>\n    </ion-fab-button>\n    <ion-fab-list side=\"start\">\n      <ion-fab-button color=\"primary\" (click)=\"addFileElement.click()\">\n        <ion-icon name=\"document-outline\"></ion-icon>\n      </ion-fab-button>\n      <ion-fab-button color=\"primary\" (click)=\"actions('newFolder')\">\n        <ion-icon name=\"folder-outline\"></ion-icon>\n      </ion-fab-button>\n    </ion-fab-list>\n  </ion-fab>\n  <!-- Input HTML Element -->\n  <input\n    #addFileElement\n    type=\"file\"\n    id=\"file-input\"\n    multiple=\"true\"\n    hidden\n    (change)=\"actions('onFileChange', $event)\"\n  />\n</ion-content>","import { Directive, ElementRef, EventEmitter, HostBinding, HostListener, Output } from '@angular/core';\n\n@Directive({\n  selector: '[hexaDropable]'\n})\nexport class DropableDirective {\n\n  @HostBinding('class.fileover') fileOver!: boolean;\n  @HostBinding('class.filedrop') fileDrop!: boolean;\n  @Output() fileDropped = new EventEmitter<{target: {files: FileList}}>();\n\n  @HostListener('dragover', ['$event']) onDragOver(e: MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.fileOver = true;\n  }\n\n  @HostListener('dragleave', ['$event']) onDragLeave(e: MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.fileOver = false;\n  }\n\n  @HostListener('drop', ['$event']) onDrop(e: MouseEvent & { dataTransfer?: DataTransfer }) {\n    e.preventDefault();\n    e.stopPropagation();\n    const files = e?.dataTransfer?.files;\n    if (!files) {\n      return;\n    }\n    this.fileOver = false;\n    if(files.length > 0) {\n      const target = this.ref.nativeElement;\n      target.files = files;\n      this.fileDropped.emit({target})\n      this.fileDrop = true;\n      console.log(`You have choosen ${files.length} files`)\n    }\n    \n  }\n\n  constructor(\n    private ref: ElementRef\n  ) { \n\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { driveRoutes } from './lib.routes';\nimport { IonicModule } from '@ionic/angular';\nimport { DrivePageComponent } from './containers/drive-page/drive-page.component';\nimport { ItemsContainerComponent } from './components/items-container/items-container.component';\nimport { HeaderComponent } from './components/header/header.component';\nimport { BreadcrumbsComponent } from './components/breadcrumbs/breadcrumbs.component';\nimport { MediaFileService } from './services/mediafile.service';\nimport { DropableDirective } from './directives/dropable.directive';\nimport { DropableComponent } from './components/dropable/dropable.component';\nimport { ItemPreviewComponent } from './components/item-preview/item-preview.component';\nimport { SelectFolderComponent } from './components/select-folder/select-folder.component';\nimport { SetupEncryptionComponent } from './components/setup-encryption/setup-encryption.component';\nimport { FilesOptionsListComponent } from './components/files-options-list/files-options-list.component';\nimport { SafePipe } from './pipes/safe.pipe';\nimport { BytesToSizePipe } from './pipes/bytes-to-size.pipe';\nimport { IsSharePipe } from './pipes/is-shared.pipe';\nimport { PreviewFilePipe } from './pipes/preview-file.pipe';\nimport { SliceAddressPipe } from './pipes/slice-address.pipe';\nimport { TotalStoragePipe } from './pipes/total-storage.pipe';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { UiModule } from '@hexa/ui';\n\n@NgModule({\n  declarations: [\n    DrivePageComponent,\n    ItemsContainerComponent,\n    HeaderComponent,\n    BreadcrumbsComponent,\n    DropableComponent,\n    ItemPreviewComponent,\n    SelectFolderComponent,\n    SetupEncryptionComponent,\n    FilesOptionsListComponent,\n    DropableDirective,\n    SafePipe,\n    BytesToSizePipe,\n    IsSharePipe,\n    PreviewFilePipe,\n    SliceAddressPipe,\n    TotalStoragePipe,\n  ],\n  imports: [\n    CommonModule, \n    IonicModule,\n    RouterModule.forChild(driveRoutes),\n    ReactiveFormsModule,\n    UiModule\n  ],\n  providers: [\n    MediaFileService,\n  ],\n})\nexport class DriveModule {}\n","// function that convert file to base64 string\nexport const fileToB64 = (file: File | Blob) => {\n  return new Promise((resolve: (a: string) => void, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        if (!reader.result) {\n          reject();\n        }\n        // check if is buffer or string and return as base64\n        const result = typeof reader.result === 'string' \n          ? reader.result \n          : reader?.result?.toString();\n        if (!result) {\n          reject();\n        }\n        resolve(result as string);\n      }\n      reader.onerror = (error) => reject(error);\n    }\n  );\n}\n\n// function that conver base64 to file\nexport const b64ToFile = (b64: string, fileName: string = 'file') => {\n  const arr = b64.split(',');\n  const mime = arr[0].match(/:(.*?);/)?.[1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], fileName, { type: mime });\n}","import { Route } from '@angular/router';\nimport { DrivePageComponent } from './containers/drive-page/drive-page.component';\n\nexport const driveRoutes: Route[] = [\n  {\n    path: '', \n    pathMatch: 'full', \n    component: DrivePageComponent\n  }\n];\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'bytesToSize'\n})\nexport class BytesToSizePipe implements PipeTransform {\n\n  transform(value?: string|number|null): string {\n    if (!value) {\n      return '0 Bytes';\n    }\n    const bytes = Number(value);\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n      return '0 Bytes';\n    }\n    // convert bytes to size\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${sizes[i]}`;\n    \n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IAccessControlConditions } from '../interfaces/mediafile.interface';\n\n@Pipe({\n  name: 'isShared',\n})\nexport class IsSharePipe implements PipeTransform {\n  public transform(\n    value: IAccessControlConditions[]|undefined,\n    account: string|null|undefined\n  ): boolean {\n\t\tif (!value) {\n\t\t\treturn false;\n\t\t}\n    if (!account) {\n      return false;\n    }\n    return value.some((condition) => {\n      return (\n        condition?.parameters?.includes(':userAddress') &&\n        condition?.returnValueTest?.value !== account &&\n\t\t\t\tcondition?.returnValueTest?.comparator === '='\n      );\n    });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { MediafileInterface } from '../interfaces/mediafile.interface';\nimport { MediaFileService } from '../services/mediafile.service';\n\n@Pipe({\n  name: 'previewFile'\n})\nexport class PreviewFilePipe implements PipeTransform {\n\n  constructor(\n    private readonly _mediafile: MediaFileService\n  ) {}\n\n  async transform(value?: MediafileInterface|undefined): Promise<string> {\n    if (!value || !value.cid) {\n      return '';\n    }\n    // use method from servcie\n    const {file} = await this._mediafile.downloadFile(value._id, false);\n    if (!file) {\n      return 'Error loading file';\n    }\n    const url = URL.createObjectURL(file);\n    return url;    \n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safe'\n})\nexport class SafePipe implements PipeTransform {\n\n  constructor(protected sanitizer: DomSanitizer) {}\n \n public transform(value: any, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n    switch (type) {\n\t\t\tcase 'html': return this.sanitizer.bypassSecurityTrustHtml(value);\n\t\t\tcase 'style': return this.sanitizer.bypassSecurityTrustStyle(value);\n\t\t\tcase 'script': return this.sanitizer.bypassSecurityTrustScript(value);\n\t\t\tcase 'url': return this.sanitizer.bypassSecurityTrustUrl(value);\n\t\t\tcase 'resourceUrl': return this.sanitizer.bypassSecurityTrustResourceUrl(value);\n\t\t\tdefault: throw new Error(`Invalid safe type specified: ${type}`);\n\t\t}\n  }\n}","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'sliceAddress'\n})\nexport class SliceAddressPipe implements PipeTransform {\n\n  transform(value?: string): string {\n    if (!value) {\n      return '';\n    }\n    if (value.length < 10) {\n      return value;\n    }\n    return `${value.slice(0, 6)}...${value.slice(-4)}`;\n    \n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { MediafileInterface } from '../interfaces/mediafile.interface';\n\n@Pipe({\n  name: 'totalStorage'\n})\nexport class TotalStoragePipe implements PipeTransform {\n\n  transform(value?: MediafileInterface[]|null): number {\n    if (!value) {\n      return 0;\n    }\n    if (value.length <= 0) {\n      return 0;\n    }\n    return value.reduce((acc, cur) => acc + (cur?.size||0), 0);\n  }\n\n}\n","import { Inject, Injectable } from \"@angular/core\";\nimport { BehaviorSubject, combineLatest, filter, map } from \"rxjs\";\nimport { v4 as uuidV4 } from 'uuid';\nimport { CID } from 'multiformats/cid';\nimport { Share } from '@capacitor/share';\nimport { IAuthService, IDatastoreService, IEncryptionService, IIPFSService, INotificationService, IPinningServiceStrategy, IPromptStrategyService} from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { IAccessControlConditions, MediafileInterface } from \"../interfaces/mediafile.interface\";\nimport { b64ToFile, fileToB64 } from \"../drive.utils\";\n\nconst ROOT_DB_COLLECTION = 'd-drive';\n\n@Injectable()\nexport class MediaFileService {\n  private readonly _queryFilterBy$: BehaviorSubject<string | null> =\n  new BehaviorSubject(null as any);\n  private readonly _filterBy$: BehaviorSubject<string> = new BehaviorSubject(\n    'root'\n  );\n  private readonly _items$: BehaviorSubject<MediafileInterface[]> = new BehaviorSubject(\n    null as any\n  );\n  public readonly breadcrumbs$ = combineLatest([\n      this._items$.asObservable(),\n      this._filterBy$.asObservable(),\n    ]).pipe(\n      map(([items, path]) => {\n        const ROOT = { name: 'root', _id: 'root' };\n        if (!items?.length) {\n          return [ROOT];\n        }\n        const breadcrumbs: { _id: string; name: string }[] = [];\n        // find `root` parent folder from current path\n        while (!breadcrumbs.find((b) => b.name === 'root')) {\n          const parent = items.find((item) => item._id === path && item.isFolder);\n          if (!parent) {\n            breadcrumbs.unshift(ROOT);\n            break;\n          }\n          breadcrumbs.unshift({ name: parent.name, _id: parent._id });\n          if (parent.name === 'root') {\n            break;\n          }\n          path = parent.parent;\n        }\n        return breadcrumbs;\n      })\n  );\n  public readonly items$ = combineLatest([\n    this._items$.asObservable().pipe(filter(Boolean)),\n    this._filterBy$.asObservable(),\n    this._queryFilterBy$.asObservable(),\n  ]).pipe(\n    map(([items, filterBy, queryFilter]) =>\n      items?.filter((item) =>\n        queryFilter\n          ? item.name.toLowerCase().includes(queryFilter.toLowerCase())\n          : item.parent === filterBy\n      )\n    ),\n    map((items) => {\n      // extract filers & folders\n      const folders = items.filter((item) => item?.isFolder);\n      const filess = items.filter((item) => !item?.isFolder);\n      // return sorted datas\n      const result = [\n        // sort folders first\n        ...folders.sort((a, b) => a.name?.localeCompare(b.name)),\n        ...filess.sort((a, b) => a.name?.localeCompare(b.name)),\n      ];\n      return result;\n    })\n  );\n  public readonly allMedia$ = this._items$.asObservable();\n\n  constructor(\n    @Inject(getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)) private readonly _authService: IAuthService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_IPFS_SERVICE)) private readonly _fileService: IIPFSService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DATASTORE_SERVICE)) private readonly _datastoreService: IDatastoreService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_ENCRYPTION_SERVICE)) private readonly _encryptionService: IEncryptionService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_NOTIFICATION_SERVICE)) private readonly _notificationSerivce: INotificationService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_IPFS_PINNING_SERVICE)) private readonly _ipfsPinningService: IPinningServiceStrategy,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_PROMPT_STRATEGY_SERVICE)) private readonly _promptStrategy: IPromptStrategyService,\n  ) {}\n\n  async getFiles() {\n    const { files = [] } = await this._datastoreService.getData(\n      ROOT_DB_COLLECTION, // collection\n      ['files'], // key\n      { files: [] } // default value to save if not exist (optional)\n    );\n    console.log('[INFO] files: ', files);\n    this._items$.next(files);\n  }\n\n  async getAllFolders() {\n    const folders = this._items$.value.filter((item) => item.isFolder);\n    return folders;\n  }\n\n  async upload({\n    file,\n    accessControlConditions = [],\n    metaDataValue = undefined, \n    fromAccount = undefined,\n  }: {\n    file: File | Blob;\n    accessControlConditions: IAccessControlConditions[] ,\n    metaDataValue?: MediafileInterface|undefined, \n    fromAccount?: string,\n  }) {\n    // check if pinning service is ready and setup\n    await this._setupPinningStrategy()\n    // build file metadata object\n    const _id = uuidV4();\n    const isoDateTime = new Date().toISOString();\n    const metaData: MediafileInterface = !metaDataValue \n      ? {\n          parent: this._filterBy$.value,\n          name: (file as File)?.name || _id,\n          size: file.size,\n          type: file.type,\n          isFolder: false,\n          createdIsoDateTime: isoDateTime,\n          lastModifiedIsoDateTime: isoDateTime,\n          _id,\n        }\n      : {\n        ...metaDataValue,\n        lastModifiedIsoDateTime: isoDateTime,\n      };\n    // encrypt file if needed\n    if (accessControlConditions?.length > 0) {\n      // update variables with encrypted data\n      metaData.accessControlConditions = accessControlConditions;\n    }\n    // upload file to ipfs\n    const { cid } = (accessControlConditions?.length <= 0) \n      ? await this._fileService.add(file)\n      : await this._fileService.getDag()\n        .then(async(dag) => {\n            console.log('[INFO] {MediafileService} accessControlConditions: ', accessControlConditions);            \n            const addressses = accessControlConditions\n              .filter((acc) => acc.returnValueTest?.comparator === '=')\n              .map((acc) => acc.returnValueTest.value);\n            console.log('[INFO] {MediafileService} addressses: ', addressses);            \n            // find DID from address\n            const authorizedDID = await Promise.all(\n              addressses.map((address) => this._authService.getAccountDID(address))\n            );\n            console.log('[INFO] {MediafileService} authorizedDID: ', authorizedDID);            \n            const fileB64 = await fileToB64(file);\n            console.log('[INFO] {MediafileService} fileB64: ', fileB64);            \n            const jwe = await this._encryptionService.encryptData(\n              fileB64,\n              authorizedDID\n            );\n            console.log('[INFO] {MediafileService} jwe: ', jwe);\n            const dagCID = await dag.put(jwe, { \n              storeCodec: 'dag-jose', \n              hashAlg: 'sha2-256',\n              pin: true,\n              preload: false,\n              timeout: 10000,\n            }); \n            console.log('[INFO] {MediafileService} dagCID: ', dagCID);                     \n            const cid = dagCID?.toString();\n            return { cid };\n        });\n    // pin hash\n    await this._ipfsPinningService.pin(cid);\n    // add CID to file metadata\n    metaData.cid = cid;\n    // update files list with new file metadata\n    const files = [...this._items$.value, metaData];\n    // update object data to database\n    await this._datastoreService.saveData(\n      { files }, \n      ROOT_DB_COLLECTION,\n      ['files']\n    );\n    // notify shared user\n    const destinationAddress = this._isWalletAddressEcryptionCondition(\n      accessControlConditions,\n      fromAccount\n    );\n    if (destinationAddress && file && fromAccount) {\n      await this._notificationSerivce.sendNotification(\n        metaData,\n        fromAccount,\n        destinationAddress,\n        'drive'\n      );\n    }\n    // update service state\n    this._items$.next(files);\n    return metaData;\n  }\n\n  async createFolder(name: string) {\n    // find parent folder from current path\n    const currentPath = this._filterBy$.value;\n    // handle unexisting parent folder\n    if (!currentPath) {\n      throw new Error('CurrentPath not found');\n    }\n    // run upload task\n    const isoDateTime = new Date().toISOString();\n    const mediaFile: MediafileInterface = {\n      parent: currentPath,\n      name,\n      size: 0,\n      isFolder: true,\n      _id: uuidV4(),\n      createdIsoDateTime: isoDateTime,\n      lastModifiedIsoDateTime: isoDateTime,\n    };\n    const mediaFiles = [...this._items$.value];\n    mediaFiles.push(mediaFile);\n    // update object data to database\n    await this._datastoreService.saveData(\n      { files: mediaFiles },\n      ROOT_DB_COLLECTION,\n      ['files']\n    );\n    // update state\n    this._items$.next(mediaFiles);\n  }\n\n  async delete(id: string) {\n    // check if pinning service is ready and setup\n    await this._setupPinningStrategy()\n    const files = [...this._items$.value];\n    const index = files.findIndex((item) => item._id === id);\n    if (index === -1) {\n      throw new Error('File not found');\n    }\n    const cid = files[index].cid;\n    if (cid) {\n      // unpin file from ipfs\n      await this._ipfsPinningService.unpin(cid).catch((err) => {\n        console.log('[ERROR] unpin: ', err);\n      });\n    }\n    // remove file from list\n    files.splice(index, 1);\n    // find all children files\n    const children = files.filter((item) => item.parent === id);\n    // unpin all children files\n    await Promise.all(\n      children.map(async (child) => {\n        if (child.cid) {\n          await this._ipfsPinningService.unpin(child.cid);\n        }\n      })\n    );\n    // remove all children files\n    children.forEach((child) => {\n      const childIndex = files.findIndex((item) => item._id === child._id);\n      if (childIndex !== -1) {\n        files.splice(childIndex, 1);\n      }\n    });\n    // update object data to database\n    await this._datastoreService.saveData(\n      { files }, \n      ROOT_DB_COLLECTION,\n      ['files']\n    );\n    // update state\n    this._items$.next(files);\n  }\n\n  async rename(_id: string, newName: string) {\n    const files = [...this._items$.value];\n    const index = this._items$.value.findIndex((item) => item._id === _id);\n    if (index === -1) {\n      throw new Error('File not found');\n    }\n    // rename file\n    files[index].name = newName;\n    // update object data to database\n    await this._datastoreService.saveData(\n      { files }, \n      ROOT_DB_COLLECTION,\n      ['files']\n    );\n    // update state\n    this._items$.next(files);\n  }\n\n  async moveTo(itemId: string, itemDestination: MediafileInterface) {\n    const files = [...this._items$.value];\n    const index = files.findIndex((file) => file._id === itemId);\n    if (index === -1) {\n      throw new Error('File not found');\n    }\n    // move file\n    files[index].parent = itemDestination._id;\n    // update object data to database\n    await this._datastoreService.saveData(\n      { files }, \n      ROOT_DB_COLLECTION,\n      ['files']\n    );\n    // update state\n    this._items$.next(files);\n  }\n\n  async downloadFile(_id: string, inBorwser = true) {\n    const { cid, name, accessControlConditions = [], type } =\n      this._items$.value.find((item) => item._id === _id) || {};\n    if (!cid) {\n      throw new Error('File not found');\n    }\n    const result: {file?: File} = {}\n    // load and decrypt file from IPFS\n    if (accessControlConditions?.length > 0) { \n      const parsedCID = CID.parse(cid);\n      const dag = await this._fileService.getDag();\n      const jwe = await dag.get(parsedCID as any);\n      const fileB64 = await this._encryptionService.decryptData(\n        jwe.value\n      );\n      const file = b64ToFile(fileB64, name);\n      // convert array buffer to file and overwrite result object\n      result.file = file\n    } else {\n      // get file from ipfs\n      const fileFromCID = await this._fileService.getFromCID(cid);\n      result.file = fileFromCID ;\n    }\n    if (inBorwser) {\n      console.log('[INFO] Creating download link...');\n      // download file from browser\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(result.file);\n      link.download = name || cid;\n      link.click();\n    }\n    return result;\n  }\n\n  async shareWithEncryption(file: MediafileInterface, fromAccount: string) {\n    const {cid, accessControlConditions} = file;\n    if (!cid) {\n      throw new Error('File not found');\n    }\n    // get file from ipfs\n    const {file: fileFromCID} = await this.downloadFile(file._id, false);\n    if (!fileFromCID) {\n      throw new Error('File not found');\n    }\n    // re upload file to ipfs with new encryption\n    await this.upload({\n      file: fileFromCID,\n      accessControlConditions: accessControlConditions||[],\n      metaDataValue: file,\n      fromAccount\n    });\n    // delete old pin\n    await this.delete(file._id);\n  }\n\n  async shareWithWebAPI(mediaFile: MediafileInterface, url: string) {\n    const {file} = await this.downloadFile(mediaFile._id, false);\n    if (!file) {\n      throw new Error('File not found');\n    }\n    try {\n      const {value: canShare} = await Share.canShare();\n      if (canShare) {\n        await Share.share({text: `${url}`});\n      } else {\n        // use browser polyfill\n        await navigator.share({text: `${url}`,\n        });\n      }\n    } catch (error: any) {\n      console.error(error);\n      throw new Error('Share API not supported');\n    }\n  }\n\n  searchByName(name: string | null) {\n    if (name) {\n      this._filterBy$.next('root');\n    }\n    this._queryFilterBy$.next(name);\n  }\n\n  navToFolderId(id: string) {\n    this._queryFilterBy$.next(null);\n    if (id === 'root') {\n      this._filterBy$.next('root');\n      return;\n    }\n    const folder = this._items$.value.find(\n      (item) => item._id === id && item.isFolder\n    );\n    if (!folder) {\n      throw new Error('Folder not found');\n    }\n    this._filterBy$.next(id);\n  }\n\n  private _isWalletAddressEcryptionCondition(\n    encryptAccessCondition: IAccessControlConditions[] | undefined,\n    account?: string\n  ) {\n    // check existing shared users account with Notifs protocol\n    const isWalletAddressCondition = encryptAccessCondition?.find(\n      (c) =>\n        c.method === '' &&\n        c.parameters.includes(':userAddress') &&\n        c.returnValueTest.value !== account\n    );\n    const destinationAddress = isWalletAddressCondition?.returnValueTest?.value;\n    return destinationAddress;\n  }\n\n  private _buildAbsolutPath(file: MediafileInterface): string {\n    const path = [file.name];\n    let parent = this._items$.value.find((item) => item._id === file.parent);\n    while (parent !== undefined) {\n      path.unshift(parent.name);\n      parent = this._items$.value.find((item) => item._id === parent?.parent);\n    }\n    return path.join('/');\n  }\n\n  private async _setupPinningStrategy() {\n    const userData = this._authService.profile$.value;\n    console.log('[INFO] Setup pinning strategy...', userData);\n    if (userData?.ipfsConfig?.serviceName) {\n      // define pinning service using user config\n      this._ipfsPinningService.setStrategy(userData?.ipfsConfig?.serviceName);\n      return;\n    }\n    // check existing config for pining servcie\n    const config = await this._promptStrategy.askSetupService(userData?.ipfsConfig?.serviceName);\n    if (!config) {\n      return;\n    }\n    if (config?.token === '' ) {\n      config.serviceName = '';\n    }\n    // save user config to user base\n    await this._authService.updateProfilData({\n      ...userData,\n      ipfsConfig: {\n        ...config\n      }\n    });\n    // define pinning service using user cnfig\n    this._ipfsPinningService.setStrategy(config.serviceName);\n  }\n}","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!config || !config.name) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        Object.defineProperty(p, 'remove', {\n            value: async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            },\n        });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data) {\n        const listeners = this.listeners[eventName];\n        if (listeners) {\n            listeners.forEach(listener => listener(data));\n        }\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data')) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, registerPlugin, registerWebPlugin, setPlatform };\n","export {};\n","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n"],"names":["EventEmitter","HeaderComponent","i0","type","payload","item","BreadcrumbsComponent","constructor","selectors","inputs","header","breadcrumbs","isSearching","outputs","actions","decls","vars","consts","template","DropableComponent","ctx","PopoverController","FilesOptionsListComponent","popCtrl","isFolder","ngContentSelectors","ModalController","ItemPreviewComponent","modalCtrl","account","SimpleChanges","BehaviorSubject","$event","ctx_r12","event","MAX_ITEMS_TO_DISPLAY","ItemsContainerComponent","_popCtrl","_modalCtrl","ngOnChanges","changes","currentValue","maxItemToDisplay$","value","next","undefined","Error","_openOptions","totalItem","items","length","max","t","setTimeout","target","complete","disabled","clearTimeout","_preview","actionsEvent","emit","trackByFn","index","ionModal","create","component","componentProps","cssClass","present","data","role","onDidDismiss","ionPopover","translucent","mode","features","map","ctx_r13","SelectFolderComponent","_id","parent","queryItem$","pipe","query","result","folders","filter","folder","console","log","navBack","find","f","FormArray","FormControl","FormGroup","ctx_r18","SetupEncryptionComponent","ionViewWillEnter","_buildForm","accessControlConditions","isDisplayConditionForm","_patchValues","form","walletAddress","selected","values","nftOwner","daoMember","accordionsOpen","walletsAddress","nftContractAddress","daoContractAddress","forEach","condition","_isWalletAddressEcryptionCondition","push","returnValueTest","get","patchValue","walletAddressArrayValue","clear","address","addValue","controlname","control","removeValue","removeAt","toggleCondition","setValue","submit","pop","conditions","_normalizeData","dismiss","contractAddress","standardContractType","method","parameters","comparator","i","operator","flat","encryptAccessCondition","includes","_normalizeChainName","name","toLowerCase","replace","ElementRef","getInjectionToken","TOKENS_NAME","AlertController","IonSearchbar","ToastController","firstValueFrom","MediaFileService","DrivePageComponent","_mediaFileService","_toastCtrl","_alertCtrl","_authService","_loaderService","account$","items$","allMedia$","breadcrumbs$","maxBreadcrumbs","splice","ionViewDidEnter","setStatus","getFiles","searchbarElement","nativeElement","addFileElement","click","files","Array","from","_askFoEncryption","upload","file","fromAccount","opts","message","duration","position","color","buttons","text","side","handler","keyboardClose","_displayMessage","detail","searchByName","navToFolderId","_createFolder","_deleteItem","_downloadFile","_rename","_move","_share","alertOpts","placeholder","attributes","require","minlength","folderName","createFolder","notifOpts","delete","toastOpts","downloadFile","newName","rename","getAllFolders","moveTo","encryptedSymmetricKey","param","cid","split","host","window","location","origin","url","shareWithWebAPI","chainName","signer$","provider","network","shareWithEncryption","ctrl","ctrlInstance","APP_WEB3AUTH_SERVICE","APP_LOADER_SERVICE","viewQuery","DropableDirective","ref","onDragOver","e","preventDefault","stopPropagation","fileOver","onDragLeave","onDrop","dataTransfer","fileDropped","fileDrop","hostVars","hostBindings","CommonModule","RouterModule","driveRoutes","IonicModule","SafePipe","BytesToSizePipe","IsSharePipe","PreviewFilePipe","SliceAddressPipe","TotalStoragePipe","ReactiveFormsModule","UiModule","DriveModule","imports","forChild","declarations","fileToB64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","toString","onerror","error","b64ToFile","b64","fileName","arr","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","path","pathMatch","transform","bytes","Number","sizes","Math","floor","pow","toFixed","pure","some","_mediafile","URL","createObjectURL","DomSanitizer","sanitizer","bypassSecurityTrustHtml","bypassSecurityTrustStyle","bypassSecurityTrustScript","bypassSecurityTrustUrl","bypassSecurityTrustResourceUrl","slice","reduce","acc","cur","size","combineLatest","v4","uuidV4","CID","Share","ROOT_DB_COLLECTION","_fileService","_datastoreService","_encryptionService","_notificationSerivce","_ipfsPinningService","_promptStrategy","_items$","asObservable","_filterBy$","ROOT","b","unshift","Boolean","_queryFilterBy$","filterBy","queryFilter","filess","sort","a","localeCompare","getData","metaDataValue","_setupPinningStrategy","isoDateTime","Date","toISOString","metaData","createdIsoDateTime","lastModifiedIsoDateTime","add","getDag","then","dag","addressses","authorizedDID","all","getAccountDID","fileB64","jwe","encryptData","dagCID","put","storeCodec","hashAlg","pin","preload","timeout","saveData","destinationAddress","sendNotification","currentPath","mediaFile","mediaFiles","id","findIndex","unpin","catch","err","children","child","childIndex","itemId","itemDestination","inBorwser","parsedCID","parse","decryptData","fileFromCID","getFromCID","link","document","createElement","href","download","canShare","share","navigator","isWalletAddressCondition","c","_buildAbsolutPath","join","userData","profile$","ipfsConfig","serviceName","setStrategy","config","askSetupService","token","updateProfilData","APP_IPFS_SERVICE","APP_DATASTORE_SERVICE","APP_ENCRYPTION_SERVICE","APP_NOTIFICATION_SERVICE","APP_IPFS_PINNING_SERVICE","APP_PROMPT_STRATEGY_SERVICE","factory","createCapacitorPlatforms","win","defaultPlatformMap","Map","set","capPlatforms","CapacitorPlatforms","currentPlatform","platforms","addPlatform","platform","setPlatform","has","initPlatforms","globalThis","self","global","legacyRegisterWebPlugin","cap","webPlugin","_a","Plugins","warn","getPlatform","ExceptionCode","CapacitorException","code","getPlatformId","_b","androidBridge","webkit","messageHandlers","bridge","createCapacitor","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","Capacitor","defaultGetPlatform","defaultIsNativePlatform","isNativePlatform","defaultIsPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","isPluginAvailable","defaultGetPluginHeader","PluginHeaders","h","handleError","pluginMethodNoop","_target","prop","defaultRegisterPlugin","jsImplementations","registeredPlugin","proxy","pluginHeader","jsImplementation","loadPluginImplementation","createPluginMethod","impl","methodHeader","methods","m","rtype","options","nativePromise","callback","nativeCallback","bind","Unimplemented","createPluginMethodWrapper","remove","wrapper","args","p","fn","Object","defineProperty","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","Proxy","_","Set","keys","registerPlugin","convertFileSrc","filePath","Exception","DEBUG","isLoggingEnabled","isNative","initCapacitorGlobal","registerWebPlugin","WebPlugin","listeners","windowListeners","listenerFunc","windowListener","registered","addWindowListener","removeAllListeners","listener","removeWindowListener","notifyListeners","hasListeners","registerWindowListener","windowEventName","pluginEventName","unimplemented","msg","unavailable","Unavailable","indexOf","handle","addEventListener","removeEventListener","WebView","encode","str","encodeURIComponent","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","cookie","cookieMap","key","trim","setCookie","encodedKey","encodedValue","expires","domain","deleteCookie","clearCookies","toUTCString","clearAllCookies","CapacitorCookies","web","readBlobAsBase64","blob","base64String","normalizeHttpHeaders","headers","originalKeys","loweredKeys","k","toLocaleLowerCase","normalized","buildUrlParams","params","shouldEncode","output","entries","accumulator","entry","isArray","substr","buildRequestInit","extra","assign","body","URLSearchParams","FormData","append","Headers","JSON","stringify","CapacitorHttpPluginWeb","request","requestInit","webFetchExtra","urlParams","shouldEncodeUrlParams","response","fetch","contentType","responseType","ok","json","status","post","patch","CapacitorHttp","ShareWeb"],"sourceRoot":"webpack:///","x_google_ignoreList":[30,31,32]}